---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';

export interface Props {
  title: string;
  heroImage?: string;
  author?: {
    name?: string;
    avatar?: string;
  };
  publishDate?: string;
  updatedDate?: string;
  tags?: string[];
  readingTime?: string;
}

const { title, heroImage, author, publishDate, updatedDate, tags = [], readingTime } = Astro.props as Props;

const frontmatter = { title, tableOfContents: false };
---
<StarlightPage frontmatter={frontmatter} hasSidebar={false}>
  {heroImage && (
    <img src={heroImage} alt={title} style="width:100%;object-fit:cover;" />
  )}
  <header style="margin-bottom:1rem;">
    {(author?.avatar || author?.name) && (
      <div style="display:flex;align-items:center;gap:0.5rem;">
        {author?.avatar && (
          <img src={author.avatar} alt={author.name ?? 'Author'} style="width:40px;height:40px;border-radius:50%;" />
        )}
        {author?.name && <span>{author.name}</span>}
      </div>
    )}
    <div style="display:flex;flex-wrap:wrap;gap:0.5rem;font-size:0.875rem;color:var(--sl-color-text-secondary);">
      {publishDate && (
        <time datetime={publishDate}>Published {publishDate}</time>
      )}
      {updatedDate && (
        <time datetime={updatedDate}>Updated {updatedDate}</time>
      )}
      {readingTime && <span>{readingTime}</span>}
    </div>
    {tags.length > 0 && (
      <ul style="display:flex;gap:0.5rem;margin-top:0.5rem;padding:0;list-style:none;">
        {tags.map((tag) => (
          <li style="background:var(--sl-color-gray-2);padding:0.25rem 0.5rem;border-radius:0.25rem;" class="tag">{tag}</li>
        ))}
      </ul>
    )}
  </header>
  <article>
    <slot />
  </article>
</StarlightPage>
