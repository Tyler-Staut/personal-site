---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';

export interface Props {
  title: string;
  heroImage?: string;
  author?: {
    name?: string;
    avatar?: string;
  };
  readingTime?: string;
}

const { title, heroImage, author, publishDate, updatedDate, tags = [], readingTime } = Astro.props as Props;

const frontmatter = { title, tableOfContents: false };
---
<StarlightPage frontmatter={frontmatter} hasSidebar={false}>
  {heroImage && (
    <img src={heroImage} alt={title} class="post-hero-image" />
  )}
  <header class="post-header">
    {(author?.avatar || author?.name) && (
      <div class="post-author">
        {author?.avatar && (
          <img
            src={author.avatar}
            alt={author.name ?? 'Author'}
            class="author-avatar"
          />
        )}
        {author?.name && <span>{author.name}</span>}
      </div>
    )}
    <div class="post-meta">
      {readingTime && <span>{readingTime}</span>}
    </div>
  </header>
  <article>
    <slot />
  </article>
</StarlightPage>

<style>
  .post-hero-image {
    width: 100%;
    object-fit: cover;
  }

  .post-header {
    margin-bottom: var(--sl-spacing-md, 1rem);
  }

  .post-author {
    display: flex;
    align-items: center;
    gap: var(--sl-spacing-sm, 0.5rem);
  }

  .author-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
  }

  .post-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--sl-spacing-sm, 0.5rem);
    font-size: var(--sl-text-sm, 0.875rem);
    color: var(--sl-color-text-secondary);
  }
</style>
